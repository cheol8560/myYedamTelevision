<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
                         "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="yolo.myTv.translatePoints.service.impl.TranslatePointMapper">
 
	 <select id="totalPoint" resultType="map">
        
        SELECT POINT
	        ,(SELECT NVL(SUM(CHARGE_POINT),0) 
	        	FROM CHARGES
	        	WHERE MEMBER_ID = #{memberId}) as "totalPoint",
	        (SELECT NVL(SUM(TRANSLATE_POINT),0) 
	        	FROM TRANSLATE_POINTS
	        	WHERE SEND_MEMBER_ID = #{memberId}) as "sendPoint",
	        (SELECT NVL(SUM(TRANSLATE_POINT),0) 
	        	FROM TRANSLATE_POINTS
	      	    WHERE RECEIVE_MEMBER_ID = #{memberId}) as "receivePoint"
        FROM MEMBERS 
        WHERE MEMBER_ID = #{memberId}
        
	</select> 
  
	<resultMap type="translate" id="translateMap">
		<result property="translateId" column="TRANSLATE_ID" />
		<result property="translatePoint" column="TRANSLATE_POINT" />
		<result property="sendMemberId" column="MEMBER_ID" />
		<result property="receiveMemberId" column="MEMBER_ID" />
		<result property="translateDate" column="TRANSLATE_DATE" />
		<result property="totalPoint" column="TOTAL_POINT" />
		<result property="sendPoint" column="SEND_POINT" />
		<result property="receivePoint" column="RECEIVE_POINT" />
	</resultMap>
</mapper>
